var json_is = null;
function callback(result) {
    json_is = result;
    $('div#content_html').html('');
    if(result.code==100){
        $.each(result.items.all,function (x,championships) {

            $('div#content_html').append('<div class="new-league-head"><div class="title-aria"><div class="title-imag"><h6 class="league-title">'+ championships.text+'</h6></div></div></div><div class="scores-parent " id="championship_'+championships.id+'"></div>');

            $.each(championships.match,function (xx,m) {
                var status = '';
                var restul_html = 'vs';
                var restul_html_1 = moment(m.match_date_time,"DD/MM/YYYY hh:mm:ss A").tz("Africa/Cairo").format("hh:mm A");
                if(m.is_live==1){
                    status ='live';
                    restul_html = m.team_result+' - '+m.team_2_result;
                    restul_html_1 = '<p class="live">ظ…ط¨ط§ط´ط±</p> ';
                }

                if(m.close_match==1){
                    status ='finshed';
                    restul_html =  m.team_result+' - '+m.team_2_result;
                    restul_html_1 = '<p class="finshed">ط§ظ†طھظ‡طھ</p> ';
                }
                $('div#championship_'+championships.id).append('<div class="alba_sports_events-event_item"  rel="'+m.id+'"><a href="'+m.external_url+'" target=_blank title="'+m.team+' vs '+m.team2+'"><div class="alba_sports_events-event_mask"><div class="event_mask_inner"><div class="h3 alba_sports_events-event_mask_inner_text">ط´ط§ظ‡ط¯ ط§ظ„ظ…ط¨ط§ط±ط§ط© ط§ظ„ط§ظ†</div></div></div><div class="event_inner"><div class="team-aria team-first"><div class="alba-team_logo"><img alt="'+m.team+'" src="'+m.team_image+'"  /></div><div class="alba_sports_events-team_title">  '+m.team+'  </div></div><div class="width '+status+'"><span>'+restul_html+'</span></div><div class="team-aria team-second"><div class=alba-team_logo><img alt="'+m.team2+'"  src="'+m.team2_image+'"  /></div><div class="h2 alba_sports_events-team_title"> '+m.team2+'    </div></div></div><div class="events-info blu"><span class="event_time match_date_time" title="'+m.match_date_time+'" rel="'+m.close_match+'"><i aria-hidden="true" class="fa fa-clock-o"></i> '+restul_html_1+'</span><span class="event_commenter"><i aria-hidden="true" class="fa fa-microphone"></i>  '+m.commentators+' </span><span class="event_chanel"><i aria-hidden="true" class="fa fa-television"></i> '+m.channels+'</span></div></a></div>');

            });
        });


    }else{
        $('div#content_html').html(result.message);
    }
}
function LoadData() {
    $.ajax({
        url: api_url,
        dataType: "jsonp"
    });
}





$(function () {
    setInterval(function(){
        $('span#current_time').html(moment().tz("Africa/Cairo").format("DD/MM/YYYY hh:mm:ss A"));
    }, 1000);

    $.ajaxSetup({
        beforeSend: function (xhr)
        {
            xhr.setRequestHeader("Accept","application/json");
            xhr.setRequestHeader("Authorization",'x');
        }
    });

    $('button#reload_prog').click(function () {
        $('div#content_html').html('<span class="fa fa-spin fa-repeat"></span>');
        LoadData();
    });
    LoadData();
});
